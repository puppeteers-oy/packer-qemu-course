# Generated by Anaconda 34.25.3.8
# Generated by pykickstart v3.32
#version=RHEL9
# Use graphical install
graphical
repo --name="minimal" --baseurl=file:///run/install/sources/mount-0000-cdrom/minimal

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

# Keyboard layouts
keyboard --xlayouts='us'
# System language
lang en_US.UTF-8

# Use CDROM installation media
cdrom

%packages
@^minimal-environment
openssh-server
%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.6.0
ignoredisk --only-use=vda
# Partition clearing information
clearpart --none --initlabel
# Disk partitioning information
#autopart --type=lvm --fstype=xfs --noswap
#autopart --type=plain --fstype=xfs --noswap
#part swap --fstype="swap" --label=swap --ondisk=vda --size=1000
part /boot --fstype="ext4" --label=boot --ondisk=vda --size=1000 --label=Boot
part / --fstype="xfs" --label=root --ondisk=vda --size=5000 --grow --label=Root

# System timezone
timezone Europe/Helsinki --utc

#Root password
rootpw --lock
user --groups=wheel --name=packer --password=$6$dKrFdu40ro5tXn7h$8nrn.yd9gyk1d4KgdaA3LChvy9tQtwZrPPxGDwJzebQW5zS69HAf7XDI287VrCqh32YyOnm2C298Ujlmf68OS0 --iscrypted --gecos="packer"

reboot

%post
echo "packer   ALL=(ALL)   NOPASSWD: ALL" > /etc/sudoers.d/01packer
/bin/chown root:root /etc/sudoers.d/01packer
/bin/chmod 0440 /etc/sudoers.d/01packer
%end
